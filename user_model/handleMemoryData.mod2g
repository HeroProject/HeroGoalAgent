use '../util/*.pl' as knowledge.
use '../topics/*.pl' as knowledge.
use '../topics/co_creation/*.pl' as knowledge.
use '../sessions' as knowledge.
use '../hero_actions' as actionspec.

module handleMemoryData(Key, Value) {
	
	if bel(not(Value = 'None'), not(waitingForMemoryAudio(Key)), not(waitingForMemoryLed(Key)), waitingForMemoryData(Key), userModel(UserModel), updateUserModel(Key, Value, UserModel, NewUserModel))
		then delete(userModel(UserModel), waitingForMemoryData(Key)) + insert(userModel(NewUserModel)).
	
	if bel(not(Value = 'None'), waitingForMemoryAudio(Key), waitingForMemoryData(Key))
		then loadAudio(Value) + delete(waitingForMemoryData(Key), waitingForMemoryAudio(Key)) + insert(waitingForLoadedAudioID(Key)).
	
	if bel(not(Value = 'None'), waitingForMemoryLed(Key), waitingForMemoryData(Key), string_to_nested_list(Value, LedAnim), userModel(UserModel), updateUserModel(Key, LedAnim, UserModel, NewUserModel))
		then delete(userModel(UserModel), waitingForMemoryData(Key), waitingForMemoryLed(Key)) + insert(userModel(NewUserModel)).
	
	if bel(waitingForMemoryData(Key), Value = 'None') then delete(waitingForMemoryData(Key)).
}