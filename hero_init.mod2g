use 'util/*.pl' as knowledge.
use 'topics/*.pl' as knowledge.
use 'topics/co_creation/*.pl' as knowledge.
use 'topics/hospital/*.pl' as knowledge.
use 'topics/robotstories/*.pl' as knowledge.
use sessions as knowledge.
use hero_actions as actionspec.
use 'userModel/initializeUserModel.mod2g' as module.

module hero_init {
	% Set loading flag, initialize state parameters, and initialize robot model.
	if true then insert(waitingForInit, currentState(s1), start, nextCondition('true'),
						posture('Unknown'), batteryCharge(100), character('unknown')).
	
	% Initalize pause button
	if bel(setPauseButton(PB)) then insert(waitForPause(PB)).

	% Initialize user model.
	if bel(useGui(true)) then insert(waitingForGuiData('userId'), waitingForGuiData('sessionId'), waitingForGuiData('basePosture'), waitingForGuiData('first_name')).
	if bel(useGui(false)) then initializeUserModel.
			
	% If first state is a question state, initialize required properties
	if bel(currentTopic(T), currentState(S), state(T, S, question), getInputModalityOrder(T, S, Order), nth0(0, Order, NewModality)) 
		then insert(currentInputModality(NewModality), modalityCounter(0), currentAttempt(1), mcCounter(0)).
	
	% Show a default (empty) page on any connected browser
	if bel(html('',Html)) then renderPage(Html).
}