use 'util/*.pl' as knowledge.
use 'minidialogs/*.pl' as knowledge.
use 'minidialogs/co_creation/*.pl' as knowledge.
use 'minidialogs/hospital/*.pl' as knowledge.
use 'minidialogs/robotstories/*.pl' as knowledge.
use sessions as knowledge.
use hero_actions as actionspec.
use 'userModel/initializeUserModel.mod2g' as module.

module hero_init {
	% Set loading flag, initialize move parameters, and initialize robot model.
	if true then insert(waitingForInit,
						start, nextCondition('true'),
						posture('Unknown'), batteryCharge(100)).
	
	% Initalize pause button
	if bel(setPauseButton(PB)) then insert(waitForPause(PB)).

	% Initialize user model.
	if bel(useGui(true)) then insert(waitingForGuiData('userId'), waitingForGuiData('sessionId'), waitingForGuiData('basePosture'), waitingForGuiData('first_name')).
	if bel(useGui(false)) then initializeUserModel.
			
	% If first move is a question move, initialize required properties
	if bel(currentMinidialog(Minidialog), currentMove(Move), move(Minidialog, Move, question), getInputModalityOrder(Minidialog, Move, Order), nth0(0, Order, NewModality)) 
		then insert(currentInputModality(NewModality), modalityCounter(0), currentAttempt(1), mcCounter(0)).
	
	% Show a default (empty) page on any connected browser
	if bel(html('',Html)) then renderPage(Html).
	
	% Initialize probe counter
	if bel(recordInteractionActive(true)) then insert(probes(0)).
}